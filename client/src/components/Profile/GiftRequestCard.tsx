import { GiftRequest } from "../../types";

type GiftRequestCardProps = {
  selectedRequest: GiftRequest;
  clearSelected: React.Dispatch<React.SetStateAction<GiftRequest | null>>;
};

const GiftRequestCard: React.FC<GiftRequestCardProps> = ({
                                                           selectedRequest,
                                                           clearSelected,
                                                         }) => {
  var timestampWithTimeZone = selectedRequest.DateNeeded;
  var date = new Date(timestampWithTimeZone);
  var formattedDate = new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
  }).format(date);

  return (
      <div>
        <p className="my-2 cursor-pointer font-proxima text-mocha">
          <span onClick={() => clearSelected(null)}>Gift Request History</span>
          <span className="text-deeppink">
          {" "}
            / Gift Request {selectedRequest.ID}
        </span>
        </p>

        <div className="flex space-x-4 my-4">
          <h1 className="text-2xl text-black font-seasons">
            Request #{selectedRequest.ID}
          </h1>
          {selectedRequest.GiftResponseID == null ? (
              <svg
                  width="132"
                  height="27"
                  viewBox="0 0 132 27"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
              >
                <rect width="132" height="27" rx="13.5" fill="#F9DCD7" />
                <circle cx="20.5" cy="13.5" r="4.5" fill="#BC2C36" />
                <path
                    d="M39.576 18H38.248V7.328H39.576V18ZM48.4441 18H47.2441V12.944C47.2441 11.584 46.5561 11.152 45.5161 11.152C44.5721 11.152 43.6761 11.728 43.2281 12.352V18H42.0281V10.272H43.2281V11.392C43.7721 10.752 44.8281 10.08 45.9801 10.08C47.5961 10.08 48.4441 10.896 48.4441 12.576V18ZM56.3416 18H55.0136V7.328H59.3016C61.4456 7.328 62.6456 8.8 62.6456 10.544C62.6456 12.288 61.4136 13.76 59.3016 13.76H56.3416V18ZM61.2696 10.544C61.2696 9.344 60.4056 8.512 59.1416 8.512H56.3416V12.576H59.1416C60.4056 12.576 61.2696 11.744 61.2696 10.544ZM65.5563 18H64.3563V10.272H65.5563V11.52C66.1803 10.704 67.0763 10.112 68.1323 10.112V11.344C67.9883 11.312 67.8443 11.296 67.6523 11.296C66.9163 11.296 65.9083 11.904 65.5563 12.528V18ZM73.0135 18.192C70.6615 18.192 69.1895 16.368 69.1895 14.128C69.1895 11.888 70.6615 10.08 73.0135 10.08C75.3655 10.08 76.8375 11.888 76.8375 14.128C76.8375 16.368 75.3655 18.192 73.0135 18.192ZM73.0135 17.12C74.6615 17.12 75.5735 15.712 75.5735 14.128C75.5735 12.56 74.6615 11.152 73.0135 11.152C71.3655 11.152 70.4375 12.56 70.4375 14.128C70.4375 15.712 71.3655 17.12 73.0135 17.12ZM78.7778 19.984L79.3858 19.088C80.0258 19.856 80.7938 20.144 81.8978 20.144C83.1778 20.144 84.3778 19.52 84.3778 17.824V16.72C83.8178 17.504 82.8738 18.096 81.7858 18.096C79.7698 18.096 78.3458 16.592 78.3458 14.096C78.3458 11.616 79.7538 10.08 81.7858 10.08C82.8258 10.08 83.7538 10.592 84.3778 11.44V10.272H85.5778V17.776C85.5778 20.336 83.7858 21.136 81.8978 21.136C80.5858 21.136 79.6898 20.88 78.7778 19.984ZM84.3778 15.776V12.4C83.9618 11.728 83.0338 11.152 82.0738 11.152C80.5218 11.152 79.5938 12.384 79.5938 14.096C79.5938 15.792 80.5218 17.04 82.0738 17.04C83.0338 17.04 83.9618 16.448 84.3778 15.776ZM89.1813 18H87.9813V10.272H89.1813V11.52C89.8053 10.704 90.7013 10.112 91.7573 10.112V11.344C91.6133 11.312 91.4693 11.296 91.2773 11.296C90.5413 11.296 89.5333 11.904 89.1813 12.528V18ZM92.8145 14.128C92.8145 11.888 94.4145 10.08 96.6225 10.08C98.9585 10.08 100.335 11.904 100.335 14.224V14.528H94.0785C94.1745 15.984 95.1985 17.2 96.8625 17.2C97.7425 17.2 98.6385 16.848 99.2465 16.224L99.8225 17.008C99.0545 17.776 98.0145 18.192 96.7505 18.192C94.4625 18.192 92.8145 16.544 92.8145 14.128ZM96.6065 11.072C94.9585 11.072 94.1425 12.464 94.0785 13.648H99.1505C99.1345 12.496 98.3665 11.072 96.6065 11.072ZM101.606 16.976L102.23 16.112C102.742 16.704 103.718 17.216 104.774 17.216C105.958 17.216 106.598 16.688 106.598 15.936C106.598 15.088 105.654 14.816 104.614 14.56C103.302 14.256 101.814 13.904 101.814 12.304C101.814 11.104 102.854 10.08 104.694 10.08C106.006 10.08 106.934 10.576 107.558 11.2L106.998 12.032C106.534 11.472 105.686 11.056 104.694 11.056C103.638 11.056 102.982 11.536 102.982 12.224C102.982 12.976 103.862 13.216 104.87 13.456C106.214 13.76 107.766 14.144 107.766 15.856C107.766 17.152 106.726 18.192 104.726 18.192C103.462 18.192 102.39 17.808 101.606 16.976ZM109.044 16.976L109.668 16.112C110.18 16.704 111.156 17.216 112.212 17.216C113.396 17.216 114.036 16.688 114.036 15.936C114.036 15.088 113.092 14.816 112.052 14.56C110.74 14.256 109.252 13.904 109.252 12.304C109.252 11.104 110.292 10.08 112.132 10.08C113.444 10.08 114.372 10.576 114.996 11.2L114.436 12.032C113.972 11.472 113.124 11.056 112.132 11.056C111.076 11.056 110.42 11.536 110.42 12.224C110.42 12.976 111.3 13.216 112.308 13.456C113.652 13.76 115.204 14.144 115.204 15.856C115.204 17.152 114.164 18.192 112.164 18.192C110.9 18.192 109.828 17.808 109.044 16.976Z"
                    fill="#32211E"
                />
              </svg>
          ) : (
              <svg
                  width="131"
                  height="27"
                  viewBox="0 0 131 27"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
              >
                <rect width="131" height="27" rx="13.5" fill="#C5DCD6" />
                <circle cx="20.5" cy="13.5" r="4.5" fill="#305749" />
                <path
                    d="M43.256 18.192C40.232 18.192 37.816 15.952 37.816 12.672C37.816 9.392 40.232 7.152 43.256 7.152C45.192 7.152 46.504 8.064 47.352 9.264L46.232 9.888C45.624 8.992 44.52 8.336 43.256 8.336C40.968 8.336 39.192 10.128 39.192 12.672C39.192 15.2 40.968 17.008 43.256 17.008C44.52 17.008 45.624 16.368 46.232 15.456L47.368 16.08C46.472 17.296 45.192 18.192 43.256 18.192ZM52.3885 18.192C50.0365 18.192 48.5645 16.368 48.5645 14.128C48.5645 11.888 50.0365 10.08 52.3885 10.08C54.7405 10.08 56.2125 11.888 56.2125 14.128C56.2125 16.368 54.7405 18.192 52.3885 18.192ZM52.3885 17.12C54.0365 17.12 54.9485 15.712 54.9485 14.128C54.9485 12.56 54.0365 11.152 52.3885 11.152C50.7405 11.152 49.8125 12.56 49.8125 14.128C49.8125 15.712 50.7405 17.12 52.3885 17.12ZM68.6968 18H67.4968V12.752C67.4968 11.776 67.0648 11.152 66.0728 11.152C65.2728 11.152 64.4248 11.728 64.0248 12.336V18H62.8248V12.752C62.8248 11.776 62.4088 11.152 61.4008 11.152C60.6168 11.152 59.7848 11.728 59.3688 12.352V18H58.1688V10.272H59.3688V11.392C59.6888 10.896 60.7288 10.08 61.8648 10.08C63.0488 10.08 63.7208 10.72 63.9448 11.52C64.3768 10.816 65.4167 10.08 66.5368 10.08C67.9448 10.08 68.6968 10.864 68.6968 12.416V18ZM72.2906 16.832V20.944H71.0906V10.272H72.2906V11.424C72.8506 10.64 73.8106 10.08 74.8986 10.08C76.9306 10.08 78.3386 11.616 78.3386 14.128C78.3386 16.624 76.9306 18.192 74.8986 18.192C73.8426 18.192 72.9146 17.696 72.2906 16.832ZM77.0746 14.128C77.0746 12.416 76.1466 11.152 74.5946 11.152C73.6506 11.152 72.7066 11.712 72.2906 12.384V15.872C72.7066 16.544 73.6506 17.12 74.5946 17.12C76.1466 17.12 77.0746 15.84 77.0746 14.128ZM81.4781 18H80.2781V7.328H81.4781V18ZM83.4239 14.128C83.4239 11.888 85.0239 10.08 87.2319 10.08C89.5679 10.08 90.9439 11.904 90.9439 14.224V14.528H84.6879C84.7839 15.984 85.8079 17.2 87.4719 17.2C88.3519 17.2 89.2479 16.848 89.8559 16.224L90.4319 17.008C89.6639 17.776 88.6239 18.192 87.3599 18.192C85.0719 18.192 83.4239 16.544 83.4239 14.128ZM87.2159 11.072C85.5679 11.072 84.7519 12.464 84.6879 13.648H89.7599C89.7439 12.496 88.9759 11.072 87.2159 11.072ZM94.8395 18.192C93.7035 18.192 93.1275 17.536 93.1275 16.384V11.328H91.8475V10.272H93.1275V8.16H94.3275V10.272H95.8955V11.328H94.3275V16.128C94.3275 16.704 94.5835 17.12 95.1115 17.12C95.4475 17.12 95.7675 16.976 95.9275 16.8L96.2795 17.696C95.9755 17.984 95.5435 18.192 94.8395 18.192ZM97.1426 14.128C97.1426 11.888 98.7426 10.08 100.951 10.08C103.287 10.08 104.663 11.904 104.663 14.224V14.528H98.4066C98.5026 15.984 99.5266 17.2 101.191 17.2C102.071 17.2 102.967 16.848 103.575 16.224L104.151 17.008C103.383 17.776 102.343 18.192 101.079 18.192C98.7906 18.192 97.1426 16.544 97.1426 14.128ZM100.935 11.072C99.2866 11.072 98.4706 12.464 98.4066 13.648H103.479C103.463 12.496 102.695 11.072 100.935 11.072ZM113.406 18H112.206V16.848C111.63 17.632 110.686 18.192 109.598 18.192C107.582 18.192 106.158 16.656 106.158 14.144C106.158 11.68 107.566 10.08 109.598 10.08C110.638 10.08 111.582 10.592 112.206 11.44V7.328H113.406V18ZM112.206 15.904V12.4C111.774 11.728 110.846 11.152 109.886 11.152C108.334 11.152 107.406 12.432 107.406 14.144C107.406 15.856 108.334 17.12 109.886 17.12C110.846 17.12 111.774 16.576 112.206 15.904Z"
                    fill="#32211E"
                />
              </svg>
          )}
        </div>
        <div className="font-proxima">
          <h1 className="text-2xl text-deeppink font-seasons">
            Gift Suggestions
          </h1>

          {selectedRequest.GiftResponseID != null ? (
              <table className="mt-4 font-proxima bg-linen  text-winered">
                <thead className="border border-b-winered text-lg">
                <tr>
                  <th className="py-2 px-4 font-semibold text-left ">
                    Gift Item Name
                  </th>
                  <th className="py-2 px-4 font-semibold text-left ">Price</th>
                  <th className="py-2 px-4 font-semibold text-left">
                    Description
                  </th>
                </tr>
                </thead>
                <tbody className="text-espresso">
                {selectedRequest.GiftResponse?.GiftCollection.Gifts.map(
                    (item) => (
                        <tr key={item.ID}>
                          <td className="py-4 px-4 border-b border-gray-300">
                            <a
                                href={"https://" + item.Link}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="cursor-pointer"
                            >
                              <div className="flex items-center space-x-2 underline hover:no-underline">
                                <p>{item.Name}</p>
                                <svg
                                    width="12"
                                    height="12"
                                    viewBox="0 0 12 12"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path
                                      d="M7.33333 0V1.33333H9.72667L3.17333 7.88667L4.11333 8.82667L10.6667 2.27333V4.66667H12V0M10.6667 10.6667H1.33333V1.33333H6V0H1.33333C0.593333 0 0 0.6 0 1.33333V10.6667C0 11.0203 0.140476 11.3594 0.390524 11.6095C0.640573 11.8595 0.979711 12 1.33333 12H10.6667C11.0203 12 11.3594 11.8595 11.6095 11.6095C11.8595 11.3594 12 11.0203 12 10.6667V6H10.6667V10.6667Z"
                                      fill="#32211E"
                                  />
                                </svg>
                              </div>
                            </a>
                          </td>
                          <td className="py-2 px-4 border-b border-gray-300">
                            {"$" + item.Price}
                          </td>
                          <td className="py-2 px-4 border-b border-gray-300">
                            {item.Description}
                          </td>
                        </tr>
                    )
                )}
                </tbody>
              </table>
          ) : (
              <p>Oops, not ready yet!</p>
          )}
        </div>

        <div className="mt-8 flex flex-row space-x-36">
          <div className="font-proxima ">
            <h1 className="text-2xl text-deeppink font-seasons">
              Gift Request Details
            </h1>
            <div className="mt-2 font-proxima text-mocha text-xl flex flex-col space-y-2">
              <p>
                Type of Occasion:{" "}
                <span className="text-espresso">
                {selectedRequest.Occasion.join(", ")}
              </span>
              </p>
              <p>
                Price Range:{" "}
                <span className="text-espresso">
                {"$" +
                    selectedRequest.BudgetMin +
                    " - $" +
                    selectedRequest.BudgetMax}
              </span>
              </p>
              <p>
                Deadline: <span className="text-espresso">{formattedDate}</span>
              </p>
              <p>
                Comments:{" "}
                <span className="text-espresso">{selectedRequest.Comment}</span>
              </p>
            </div>
          </div>
          <div>
            <h1 className="text-2xl text-deeppink font-seasons">
              Giftee Details
            </h1>
            <div className="mt-2 font-proxima text-mocha text-xl flex flex-col space-y-2">
              <p>
                Name:{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.GifteeName}
              </span>
              </p>
              <p>
                Gender Identity:{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.Gender}
              </span>
              </p>
              <p>
                Relation to Giftee:{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.CustomerRelationship}
              </span>
              </p>
              <p>
                Age:{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.Age}
              </span>
              </p>
              <p>
                Favorite Color(s):{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.Colors.join(", ")}
              </span>
              </p>
              <p>
                Interests:{" "}
                <span className="text-espresso">
                {selectedRequest.Giftee.Interests.join(", ")}
              </span>
              </p>
            </div>
          </div>
        </div>
      </div>
  );
};

export default GiftRequestCard;